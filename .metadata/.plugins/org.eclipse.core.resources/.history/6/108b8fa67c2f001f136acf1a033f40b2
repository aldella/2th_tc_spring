<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardMapper">
	
	<select id="searchCount" parameterType="hashmap" resultType="int">
		select
		        count(board_no)
		from
		        board
		where
		        status='Y'
		<if test="condition == 'writer'">
			and
			        board_WRITER
		</if>
		<if test="condition == 'title'">
			and
			        board_title
        </if>
        <if test="condition == 'content'">
			and        
			        board_content
		</if>		        
		LIKE '%' || #{keyword} || '%' 
	</select>
	
	<select id="boardCount" resultType="_int">
		SELECT
				COUNT(BOARD_NO)
		FROM
				BOARD
		WHERE
				STATUS = 'Y'
	</select>

	<select id="findAll" resultType="board" parameterType="map">
	select
	    BOARD_NO boardNo,
	    BOARD_TITLE boardTitle,
	    BOARD_WRITER boardWriter,
	    COUNT count,
	    CREATE_DATE createDate,
	    ORIGIN_NAME originName
	from
	    (
	    select
	        BOARD_NO,
	        BOARD_TITLE,
	        BOARD_WRITER,
	        COUNT,
	        CREATE_DATE,
	        ORIGIN_NAME,
	        ROWNUM RNUM
	    from (
	        select
	            BOARD_NO,
	            BOARD_TITLE,
	            BOARD_WRITER,
	            COUNT,
	            CREATE_DATE,
	            ORIGIN_NAME
	        from 
	            board
	        where
	            STATUS = 'Y'
	        ORDER
	        BY
	            BOARD_NO DESC
	        )
	    )
	WHERE
	    RNUM BETWEEN #{startValue} AND #{endValue}
	
	</select>
</mapper>